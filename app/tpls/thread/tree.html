<!--
<div class="container">
    <ul id="tree">
        <li ng-repeat="item1 in vm.items">
            <div ng-click="item1.$folder = !item1.$folder">
                <span ng-if="item1.$folder">+</span>
                <span ng-if="!item1.$folder">-</span>
                {{item1.title}}
            </div>
            <ul ng-if="item1.items && !item1.$folder">
                <li ng-repeat="item2 in item1.items">
                    <div ng-click="item2.$folder = !item2.$folder">
                        <span ng-if="item2.$folder">+</span>
                        <span ng-if="!item2.$folder">-</span>
                        {{item2.title}}
                    </div>
                    <ul ng-if="item2.items&&!item2.$folder">
                        <li ng-repeat="item3 in item2.items">{{item3.title}}</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div>-->
<div class="container">
    <ul id="tree">
        <li ng-repeat="item1 in vm.items|treeFilter">
            <div ng-click="item1.$foldToggle()">
                <span ng-if="item1.$hasChildren()">
                    <span ng-if="!item1.$isFolded()">+</span>
                    <span ng-if="item1.$isFolded()">-</span>
                </span>
                {{item1.title}}
            </div>
            <ul ng-if="item1.$isFolded() && !!item1.$isFolded()">
                <li ng-repeat="item2 in item1.items">
                    <div ng-click="item2.$foldToggle()">
                        <span ng-if="item2.$hasChildren()">
                            <span ng-if="!item2.$isFolded()">+</span>
                            <span ng-if="item2.$isFolded()">-</span>
                        </span>
                        {{item2.title}}
                    </div>
                    <ul ng-if="item2.$isFolded() && !!item2.$isFolded()">
                        <li ng-repeat="item3 in item2.items">{{item3.title}}</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>